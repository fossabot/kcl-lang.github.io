"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[78859],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=c(n),g=o,h=p["".concat(s,".").concat(g)]||p[g]||u[g]||r;return n?a.createElement(h,i(i({ref:t},m),{},{components:n})):a.createElement(h,i({ref:t},m))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},71084:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const r={slug:"2023-new-version-feature-interpretation-kclvm-go-feature-overview",title:"new version feature interpretation - kclvm-go feature overview",authors:{name:"KCL Team",title:"KCL Team"},tags:["KCL","kclvm-go"]},i=void 0,l={permalink:"/zh-CN/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview",editUrl:"https://github.com/KusionStack/kcl-lang.io/tree/main/blog/2023-04-27-new-version-feature-interpretation-kclvm-go-feature-overview/index.md",source:"@site/blog/2023-04-27-new-version-feature-interpretation-kclvm-go-feature-overview/index.md",title:"new version feature interpretation - kclvm-go feature overview",description:"What is kclvm-go?",date:"2023-04-27T00:00:00.000Z",formattedDate:"2023\u5e744\u670827\u65e5",tags:[{label:"KCL",permalink:"/zh-CN/blog/tags/kcl"},{label:"kclvm-go",permalink:"/zh-CN/blog/tags/kclvm-go"}],readingTime:3.61,hasTruncateMarker:!1,authors:[{name:"KCL Team",title:"KCL Team"}],frontMatter:{slug:"2023-new-version-feature-interpretation-kclvm-go-feature-overview",title:"new version feature interpretation - kclvm-go feature overview",authors:{name:"KCL Team",title:"KCL Team"},tags:["KCL","kclvm-go"]},nextItem:{title:"KCL v0.4.6 \u53d1\u5e03\u65e5\u5fd7",permalink:"/zh-CN/blog/2022-kcl-0.4.6-release-blog"}},s={authorsImageUrls:[void 0]},c=[{value:"What is <code>kclvm-go</code>?",id:"what-is-kclvm-go",level:2},{value:"What problems does the new version of <code>kclvm-go</code> solve?",id:"what-problems-does-the-new-version-of-kclvm-go-solve",level:2},{value:"Quickly experience kclvm-go via  the command line",id:"quickly-experience-kclvm-go-via--the-command-line",level:2},{value:"How to integrate KCL with Go code?",id:"how-to-integrate-kcl-with-go-code",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Additional Resources",id:"additional-resources",level:2}],m={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"what-is-kclvm-go"},"What is ",(0,o.kt)("inlineCode",{parentName:"h2"},"kclvm-go"),"?"),(0,o.kt)("p",null,"kclvm is a runtime library for the KCL language that provides a programming interface for interacting with the KCL compiler. It is a client library that can be used to perform various operations on KCL source code such as execution and formatting. kclvm-go is a Go language wrapper for kclvm that provides an SDK for KCL language integration in cloud-native environments.",(0,o.kt)("br",null),(0,o.kt)("br",null),"The current version of ",(0,o.kt)("inlineCode",{parentName:"p"},"kclvm-go")," is built on top of the kclvm json2 RPC API, which means that it uses the same API as other language KCL clients to interact with KCL source code. The way it works is similar to other language KCL SDKs, but it provides a more user-friendly Go language style wrapper."),(0,o.kt)("h2",{id:"what-problems-does-the-new-version-of-kclvm-go-solve"},"What problems does the new version of ",(0,o.kt)("inlineCode",{parentName:"h2"},"kclvm-go")," solve?"),(0,o.kt)("p",null,"KCL is closely related to the cloud-native domain as a configuration language, while on the other hand, Go has become the de facto standard programming language for cloud-native domains. In this context, the development of a Go SDK for the KCL compiler to directly interact with Go was necessary, which is the reason for the creation of ",(0,o.kt)("inlineCode",{parentName:"p"},"kclvm-go"),".",(0,o.kt)("br",null),(0,o.kt)("br",null),"The initial version of the KCL compiler and runtime were written in Python, and the runtime for the first version of the KCL language had a lot of room for improvement in terms of performance and security due to the performance issues and characteristics of the dynamic nature of the Python language. In light of security and efficiency considerations, later versions of the KCL compiler were written in the Rust programming language. As a result, the new version of ",(0,o.kt)("inlineCode",{parentName:"p"},"kclvm-go")," is based on rust-implemented kclvm packaging, eliminating Python dependencies, simplifying installation, and optimizing the user experience."),(0,o.kt)("h2",{id:"quickly-experience-kclvm-go-via--the-command-line"},"Quickly experience kclvm-go via  the command line"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"kclvm-go")," provides a built-in command line tools named ",(0,o.kt)("inlineCode",{parentName:"p"},"kcl-go")," ,which supports one-click installation through ",(0,o.kt)("inlineCode",{parentName:"p"},"go install"),". The local Go version must be 1.18+ and the complete CGO toolchain is required.",(0,o.kt)("br",null),(0,o.kt)("br",null),"Simply run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"% go install kusionstack.io/kclvm-go/cmds/kcl-go@latest\n")),(0,o.kt)("p",null,"Create a new KCL source file hello.k"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'apiVersion = "apps/v1"\nkind = "Deployment"\nmetadata = {\n    name = "nginx"\n    labels.app = "nginx"\n}\nspec = {\n    replicas = 3\n    selector.matchLabels = metadata.labels\n    template.metadata.labels = metadata.labels\n    template.spec.containers = [\n        {\n            name = metadata.name\n            image = "${metadata.name}:1.14.2"\n            ports = [{ containerPort = 80 }]\n        }\n    ]\n}\n')),(0,o.kt)("p",null,"And then execute the KCL directly from the command line with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'% kcl-go run ./hello.k\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: "nginx:1.14.2"\n          ports:\n            - containerPort: 80\n')),(0,o.kt)("h2",{id:"how-to-integrate-kcl-with-go-code"},"How to integrate KCL with Go code?"),(0,o.kt)("p",null,"Here is an example of how to integrate KCL into your Go program. Using the hello.k file from the previous example, construct the following main.go code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "kusionstack.io/kclvm-go"\n)\n\nfunc main() {\n    result := kclvm.MustRun("./hello.k").GetRawYamlResult()\n    fmt.Println(result)\n}\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'kclvm.MustRun("./hello.k").GetRawYamlResult()')," runs the corresponding KCL source file"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"fmt.Println(result)")," prints the result of the run")),(0,o.kt)("p",null,"The local environment requires Go version 1.18+ and a complete CGO toolchain. Add the ",(0,o.kt)("inlineCode",{parentName:"p"},"kclvm-go")," dependency to this command line tool by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," % go get kusionstack.io/kclvm-go@main\n")),(0,o.kt)("p",null,"The following command runs the Go program:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'% go run main.go      \napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: "nginx:1.14.2"\n          ports:\n            - containerPort: 80\n')),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"Through the kclvm-go version change, we have removed Python dependencies and switched to a more efficient Rust runtime. The article briefly demonstrates how to use the kcl-go command line tool to execute KCL source code and how to integrate KCL into your Go program. "),(0,o.kt)("br",null),(0,o.kt)("br",null),"In addition to compiling and running KCL source code, kclvm-go provides a variety of features to facilitate KCL integration in Go, including:",(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"KCL static error analysis (lint and format)"),(0,o.kt)("li",{parentName:"ul"},"KCL dependency analysis"),(0,o.kt)("li",{parentName:"ul"},"Go struct and KCL Schema mutual conversion")),(0,o.kt)("h2",{id:"additional-resources"},"Additional Resources"),(0,o.kt)("p",null,"Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://kcl-lang.io/"},"KCL Website")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://kusionstack.io/"},"Kusion Website")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/KusionStack/KCLVM"},"KCL Repo")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/KusionStack/kclvm-go"},"kclvm-go Repo")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/KusionStack/kusion"},"Kusion Repo")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/KusionStack/konfig"},"Konfig Repo"))),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/KusionStack/community"},"community")," for ways to join us. \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f"))}u.isMDXComponent=!0}}]);