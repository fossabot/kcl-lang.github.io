<!doctype html>
<html class="docs-version-0.4.4" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Abstraction  Validation  Production-Ready RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Abstraction  Validation  Production-Ready Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Abstraction  Validation  Production-Ready" href="/zh-CN/opensearch.xml"><title data-rh="true">简介 | Abstraction  Validation  Production-Ready</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kcl-lang.github.io/zh-CN/docs/user_docs/getting-started/intro"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="0.4.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.4.4"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docsearch:version" content="0.4.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.4.4"><meta data-rh="true" property="og:title" content="简介 | Abstraction  Validation  Production-Ready"><meta data-rh="true" name="description" content="KCL 是什么?"><meta data-rh="true" property="og:description" content="KCL 是什么?"><link data-rh="true" rel="icon" href="/zh-CN/img/kcl.png"><link data-rh="true" rel="canonical" href="https://kcl-lang.github.io/zh-CN/docs/user_docs/getting-started/intro"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/docs/user_docs/getting-started/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/zh-CN/docs/user_docs/getting-started/intro" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/docs/user_docs/getting-started/intro" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RE5E6BQUZV-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-CN/assets/css/styles.f544af73.css">
<link rel="preload" href="/zh-CN/assets/js/runtime~main.264d3786.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/main.7ad8e011.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">⭐️ If you like KCL, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/KusionStack/KCLVM">Github</a></div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><div class="navbar__logo"><img src="/zh-CN/img/kcl-logo.jpg" alt="KCL Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/zh-CN/img/kcl-logo.jpg" alt="KCL Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" docid="intro/kcl-intro" href="/zh-CN/docs/user_docs/getting-started/">使用文档</a><a class="navbar__item navbar__link" href="/zh-CN/docs/reference/lang/tour">参考手册</a><a class="navbar__item navbar__link" href="/zh-CN/docs/tools/cli/">工具</a><a href="http://39.106.40.108/-/play/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" sidebarid="playground"><span>游乐场<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/KusionStack/examples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" sidebarid="examples"><span>样例<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/zh-CN/docs/community/intro/">社区</a><a class="navbar__item navbar__link" href="/zh-CN/blog">博客</a><a class="navbar__item navbar__link" href="/zh-CN/docs/events/2022/kcl_paper">事件</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/zh-CN/docs/events/2022/kcl_paper">0.4.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-CN/docs/next/user_docs/getting-started/intro">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-CN/docs/user_docs/getting-started/intro">0.4.4</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.4.3/user_docs/getting-started/intro">0.4.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>中文（中国）</span></span></a><ul class="dropdown__menu"><li><a href="/docs/user_docs/getting-started/intro" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh-CN/docs/user_docs/getting-started/intro" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文（中国）</a></li><li><a href="https://github.com/KusionStack/kcl-lang.io/issues/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="searchBox_kyqE"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/zh-CN/docs/user_docs/getting-started/">快速开始</a><button aria-label="Toggle the collapsible sidebar category &#x27;快速开始&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-CN/docs/user_docs/getting-started/intro">简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/user_docs/getting-started/install">安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/user_docs/getting-started/kcl-quick-start">KCL 语言速览</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/zh-CN/docs/user_docs/guides/">用户手册</a><button aria-label="Toggle the collapsible sidebar category &#x27;用户手册&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/zh-CN/docs/user_docs/support/">常见问答</a><button aria-label="Toggle the collapsible sidebar category &#x27;常见问答&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/zh-CN/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/zh-CN/docs/user_docs/getting-started/">快速开始</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/zh-CN/docs/user_docs/getting-started/intro">简介</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.4.4</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>简介</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="kcl-是什么">KCL 是什么?<a class="hash-link" href="#kcl-是什么" title="Direct link to heading">​</a></h2><p><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">Kusion 配置语言（KCL）</a>是一个开源的基于约束的记录及函数语言。KCL 通过成熟的编程语言技术和实践来改进对大量繁杂配置比如云原生 kubernetes 配置场景的编写，致力于构建围绕配置的更好的模块化、扩展性和稳定性，更简单的逻辑编写，以及更快的自动化集成和良好的生态延展性。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="配置是什么">配置是什么?<a class="hash-link" href="#配置是什么" title="Direct link to heading">​</a></h2><p>所谓配置就是当我们部署软件系统时，我们并不认为它们是固定不变的。不断发展的业务需求、基础架构要求和其他因素意味着系统不断变化。当我们需要快速更改系统行为，并且更改过程需要昂贵、冗长的重建和重新部署过程时，业务代码更改往往是不够的。而配置可以为我们提供了一种低开销的方式来改变系统功能，比如我们会经常为系统编写一些如下所示的 JSON 或 YAML 文件作为我们系统的配置。</p><ul><li>JSON 配置</li></ul><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;server&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;addr&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;listen&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4545</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;database&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;enabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;ports&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">8001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">8002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>YAML 配置</li></ul><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">addr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4545</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8002</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>我们可以根据需要选择在 JSON 和 YAML 文件中存储静态配置。此外，配置还可以存储在允许更灵活配置的高级语言中，通过代码编写、渲染并得到静态配置。KCL 就是这样一种配置语言，我们可以编写 KCL 代码来生成 JSON/YAML 等配置。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="为什么开发-kcl">为什么开发 KCL?<a class="hash-link" href="#为什么开发-kcl" title="Direct link to heading">​</a></h2><p>除了常规配置外，云原生配置的特点还包括数量大、覆盖范围广。例如 Kubernetes 提供了一个声明性的应用编程接口（API）机制，通过开放性允许用户充分利用其资源管理能力；然而，这也意味着容易出错的行为。</p><ul><li>Kubernetes 配置缺少用户端验证方法，无法检查数据的有效性。</li><li>Kubernetes 公开了 500 多个模型，2000 多个字段，并允许用户自定义模型，而无需考虑多个站点，多个环境和多个部署拓扑的配置重用，碎片化配置给大规模配置的协同编写和自动管理带来了许多困难。</li></ul><p>比如当我们管理 Kubernetes 资源清单时，我们常常会手写维护，或者使用 Helm 和 Kustomize 等工具来维护我们 YAML 配置或者配置模版，然后通过 kubectl 和 helm 命令行等工具将资源下发到集群。但是作为一个 &quot;YAML 工程师&quot; 每天维护 YAML 配置无疑是琐碎且无聊的，并且容易出错。</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Omit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchlabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RZ00A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Omit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoSchedules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> is</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">over</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Equal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> images.example/app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1 </span><span class="token comment" style="color:#999988;font-style:italic"># Wrong ident</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Wrong type. The type of cpu should be str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 4Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Field missing: ephemeral-storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">affinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">nodeAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">requiredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">nodeSelectorTerms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> is</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">over</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>YAML 中的结构化数据是无类型的，缺乏验证方法，无法立即检查所有数据的有效性</li><li>YAML 编程能力欠佳，容易写出不正确的缩进，也没有逻辑判断、等常见代码组织方式，容易写出大量重复配置，难以维护</li><li>Kubernetes 设计是复杂的，用户很难理解所有细节，比如上面配置中的 <code>toleration</code> 和 <code>affinity</code> 字段，如果用户不理解调度逻辑，它可能被错误地省略掉或者多余的添加</li></ul><p>因此，KCL 期望在 Kubernetes YAML 资源管理解决如下问题：</p><ul><li>用<strong>生产级高性能编程语言</strong>以<strong>编写代码</strong>的方式提升配置的灵活度，比如条件语句、循环、函数、包管理等特性提升配置重用的能力</li><li>在代码层面提升<strong>配置语义验证</strong>的能力，比如字段可选/必选、类型、范围等配置检查能力</li><li>提供<strong>配置分块编写、组合和抽象的能力</strong>，比如结构定义、结构继承、约束定义等能力</li></ul><p>目前云原生社区已经进行了大量的尝试来改进其配置技术，主要可分为三类：</p><ul><li>用于模板、修补和验证的基于低级数据格式的工具，使用外部工具来增强重用和验证。</li><li>领域特定语言（DSL）和配置语言（CL），以增强语言能力。</li><li>基于通用语言（GPL）的解决方案，使用 GPL 的云开发工具包（CDK）或框架来定义配置。</li></ul><p>以前的工作并不能满足所有这些需求。一些工具基于 Kubernetes API 验证配置。虽然它支持检查缺失的属性，但验证通常很弱，仅限于开放应用程序编程接口（OpenAPI）。</p><p>一些工具支持自定义验证规则，但规则描述很繁琐。在配置语言方面，专注于减少样板，只有少数专注于类型检查、数据验证、测试等。</p><p>Helm 使用参数化模板技术来解决动态配置问题。随着规模的增加，参数化模板往往变得复杂且难以维护；必须手动识别参数替换位点。然而，这是一个乏味且容易出错的过程，参数会逐渐侵蚀模板，模板中的任何值都可能逐渐演变为参数。与直接使用 Kubernetes API 相比，这种模板与许多参数相结合的可读性通常更差。Kustomize 使用代码修补来实现多环境配置代码的重用。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="为什么使用-kcl">为什么使用 KCL?<a class="hash-link" href="#为什么使用-kcl" title="Direct link to heading">​</a></h2><p>KCL 是一种现代高级领域编程语言，并且它是一种编译静态的强类型语言。KCL 为开发人员提供了通过记录和函数语言设计将配置（config）、建模抽象（schema）、业务逻辑（lambda）和策略（rule）作为核心能力。</p><p>KCL 试图提供独立于运行时的可编程性，不在本地提供线程和IO等系统功能，但支持云本地操作场景的功能，并试图为解决领域问题并提供稳定、安全、低噪声、低副作用、易于自动化和易于管理的编程支持。</p><p>与用 GPL 编写的客户端运行时不同，KCL 程序通常运行并生成低级数据，并集成到客户端运行时工具中，该工具可以通过在推送到运行时之前分别测试和验证 KCL 代码来提供稳定性保证。KCL 代码也可以编译成 WASM 模块，在完全测试后，可以将其集成到服务器运行时中。</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-79d6584aff8f7dcf814ba187f3d276ef.png" width="597" height="576"></p><ul><li><strong>简单易用</strong>：源于 Python、Golang 等高级语言，采纳函数式编程语言特性，低副作用</li><li><strong>设计良好</strong>：独立的 Spec 驱动的语法、语义、运行时和系统库设计</li><li><strong>快速建模</strong>：以 <a href="https://kusionstack.io/docs/reference/lang/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a> 为中心的配置类型及模块化抽象</li><li><strong>功能完备</strong>：基于 <a href="https://kusionstack.io/docs/reference/lang/lang/codelab/simple" target="_blank" rel="noopener noreferrer">Config</a>、<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#schema" target="_blank" rel="noopener noreferrer">Schema</a>、<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#function" target="_blank" rel="noopener noreferrer">Lambda</a>、<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#rule" target="_blank" rel="noopener noreferrer">Rule</a> 的配置及其模型、逻辑和策略编写</li><li><strong>可靠稳定</strong>：依赖<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#type-system" target="_blank" rel="noopener noreferrer">静态类型系统</a>、<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#validation" target="_blank" rel="noopener noreferrer">约束</a>和<a href="https://kusionstack.io/docs/reference/lang/lang/tour#rule" target="_blank" rel="noopener noreferrer">自定义规则</a>的配置稳定性</li><li><strong>强可扩展</strong>：通过独立配置块<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#-operators-1" target="_blank" rel="noopener noreferrer">自动合并机制</a>保证配置编写的高可扩展性</li><li><strong>易自动化</strong>：<a href="https://kusionstack.io/docs/reference/lang/lang/tour/#kcl-cli-variable-override" target="_blank" rel="noopener noreferrer">CRUD APIs</a>，<a href="https://kusionstack.io/docs/reference/lang/xlang-api/overview" target="_blank" rel="noopener noreferrer">多语言 SDK</a>，<a href="https://github.com/KusionStack/kcl-plugin" target="_blank" rel="noopener noreferrer">语言插件</a> 构成的梯度自动化方案</li><li><strong>极致性能</strong>：使用 Rust &amp; C，<a href="https://llvm.org/" target="_blank" rel="noopener noreferrer">LLVM</a> 实现，支持编译到本地代码和 <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WASM</a> 的高性能编译时和运行时</li><li><strong>API 亲和</strong>：原生支持 <a href="https://github.com/KusionStack/kcl-openapi" target="_blank" rel="noopener noreferrer">OpenAPI</a>、 Kubernetes CRD， Kubernetes YAML 等 API 生态规范</li><li><strong>开发友好</strong>：<a href="https://kusionstack.io/docs/reference/cli/kcl/" target="_blank" rel="noopener noreferrer">语言工具</a> (Format，Lint，Test，Vet，Doc 等)、 <a href="https://github.com/KusionStack/vscode-kcl" target="_blank" rel="noopener noreferrer">IDE 插件</a> 构建良好的研发体验</li><li><strong>安全可控</strong>：面向领域，不原生提供线程、IO 等系统级功能，低噪音，低安全风险，易维护，易治理</li><li><strong>生产可用</strong>：广泛应用在蚂蚁集团平台工程及自动化的生产环境实践中</li></ul><p>有关更多语言设计和功能，请参阅<a href="https://kcl-lang.github.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">KCL文档</a>. 虽然 KCL 不是通用语言，但它有相应的应用场景。开发人员可以通过 KCL 编写<strong>config</strong>、<strong>schema</strong>、<strong>function</strong>和<strong>rule</strong>，其中 config 用于定义数据，schema 用于描述数据的模型定义，rule 用于验证数据，schema 和 rule 还可以组合使用模型和约束来充分描述数据。此外，我们还可以使用 KCL 中的 lambda 纯函数来组织数据代码，封装通用代码，并在需要时直接调用它。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="kcl-使用场景">KCL 使用场景<a class="hash-link" href="#kcl-使用场景" title="Direct link to heading">​</a></h2><p>可以将 KCL 用于</p><ul><li>生成静态配置数据如 JSON, YAML 等</li><li>使用 schema 对配置数据进行建模并减少配置数据中的样板文件</li><li>为配置数据定义带有规则约束的 schema 并对数据进行自动验证</li><li>无副作用地组织、简化、统一和管理庞大的配置</li><li>通过分块编写配置数据可扩展地管理庞大的配置</li><li>与 <a href="https://kusionstack.io" target="_blank" rel="noopener noreferrer">Kusion Stack</a> 一起，用作平台工程语言来交付现代应用程序</li></ul><p>通过 KCL 编译器、语言工具、IDE 和多语言 API，您可以在以下场景中使用 KCL：</p><ul><li><strong>配置和自动化</strong>：抽象、管理与自动化不同规模的配置，包括小型配置（应用程序、网络、微服务、数据库、监控、CI/CD、kubernetes 资源等配置）。此外，通过 <a href="/zh-CN/docs/tools/cli/OpenAPI/">KCL OpenAPI工具</a> 和 KCL 的包管理功能，我们可以完全抽象和重用现有模型。</li><li><strong>安全与合规</strong>：利用KCL动态参数的功能，使用代码定义、更新、共享和执行策略。通过利用基于KCL代码的自动化而不是依赖手动流程来管理策略，这使团队能够更快地移动，并减少由于人为错误而导致错误的可能性。</li><li><strong>意图描述</strong>：KCL 可用于描述工具、脚本和工作流，通过自定义引擎使用和执行 KCL 定义的意图。</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="如何选择">如何选择<a class="hash-link" href="#如何选择" title="Direct link to heading">​</a></h2><p>简单的答案：</p><ul><li>如果你需要编写结构化的静态的 K-V，或使用 Kubernetes 原生的技术工具，建议选择 YAML</li><li>如果你希望引入编程语言便利性以消除文本(如 YAML、JSON) 模板，有良好的可读性，或者你已是 Terraform 的用户，建议选择 HCL</li><li>如果你希望引入类型功能提升稳定性，维护可扩展的配置文件，建议选择 CUE</li><li>如果你希望以现代语言方式编写复杂类型和建模，维护可扩展的配置文件，原生的纯函数和策略，和生产级的性能和自动化，建议选择 KCL</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-yamljson">vs. YAML/JSON<a class="hash-link" href="#vs-yamljson" title="Direct link to heading">​</a></h3><p>YAML/JSON 适用于小型配置场景。对于需要频繁修改的大型云原生配置场景，它们更适合 KCL。所涉及的主要区别是配置数据抽象和部署之间的区别：</p><p>使用 KCL 进行配置的优点是：对于静态数据，抽象一层的优点意味着整个系统具有部署灵活性。不同的配置环境、租户和运行时可能对静态数据有不同的要求，甚至不同的组织可能有不同的规范和产品要求。KCL可用于向用户公开最需要的和经常修改的配置。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-jsonnetgcl">vs. Jsonnet/GCL<a class="hash-link" href="#vs-jsonnetgcl" title="Direct link to heading">​</a></h3><p>GCL 是一种用 Python 实现的声明式配置语言，它提供了支持模板抽象的必要语言功能。然而 GCL 编译器本身是用Python编写的，且语言本身是解释执行的。对于大型模板实例（如 kubernetes 模型），性能较差。</p><p>Jsonnet 是一种用 C++ 实现的数据模板语言，适用于应用程序和工具开发人员，可以生成配置数据并通过代码组织、简化和管理大型配置，而不会产生副作用。</p><p>Jsonnet 和 GCL 非常擅长减少样板。它们都可以使用代码生成配置，就像工程师只需要编写高级 GPL 代码，而不是手动编写容易出错且难以理解的服务器二进制代码一样。Jsonnet 减少了 GCL 的一些复杂性，但在很大程度上属于同一类别。两者都有许多运行时错误，类型检查和约束能力不足。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-hcl">vs. HCL<a class="hash-link" href="#vs-hcl" title="Direct link to heading">​</a></h3><p>HCL 是一种 Go 实现的结构化配置语言。HCL的原生语法受到libucl和nginx配置的启发。它用于创建一种对人类和机器友好的结构化配置语言，主要用于devops工具、服务器配置和资源配置，作为<a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">Terraform语言</a>.</p><p>HCL 与 GCL 有一些比较相似的地方。它确实引入了穷人版本的继承：文件覆盖。可以在多个文件中定义字段，这些文件按文件名的特定顺序被覆盖。虽然没有GCL那么复杂，但它确实存在一些相同的问题。模式是固定的，能力是有限的。</p><p>HCL 的用户界面不能通过 Terraform 提供者 Schema 定义直接感知。此外，在编写复杂对象和必需/可选字段定义时，用户界面很麻烦。动态参数受变量的条件字段约束。资源本身的约束需要由提供程序模式定义，或者与Sentinel/Rego 和其他策略语言相结合。语言本身的完整性不能自我封闭，其实现方法也不统一。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-cue">vs. CUE<a class="hash-link" href="#vs-cue" title="Direct link to heading">​</a></h3><p>CUE 可以通过结构、无继承和其他特性用作建模，当模型定义之间没有冲突时可以实现高度抽象。因为 CUE 在运行时执行所有约束检查，所以它在大规模配置建模场景中可能存在性能瓶颈。CUE 将类型和值组合为一个概念，并通过各种语法简化了约束的编写。例如，不需要泛型类型和枚举，求和类型和空值合并是一回事。CUE 支持配置合并，但它是完全幂等的。它可能无法满足复杂的多租户和多环境配置场景的要求。对于复杂的循环和约束场景，编写起来很复杂，编写需要精确配置修改或者 Patch 的场景也很麻烦。</p><p>对于 KCL，建模是通过 KCL Schema 进行的，通过语言级工程和一些面向对象的特性（如单一继承、Mixin 复用）可以实现高模型抽象。KCL 是一种静态编译语言，用于大规模建模场景是运行时开销较低 (性能更高，更低的内存消耗)。KCL 提供了更丰富的检查声明性约束语法，这使得配置和策略编写更加容易。对于一些配置字段组合约束，它更容易编写（与 CUE 相比，KCL 提供了更多的 if-guard 组合约束、all/any/map/filter 表达式和其他集合约束编写方法，这使得编写更容易）。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-kustomize">vs. Kustomize<a class="hash-link" href="#vs-kustomize" title="Direct link to heading">​</a></h3><p>Kustomize 的核心功能是其文件级覆盖功能。但是它存在多个覆盖链的问题，因为找到特定属性值的语句不能保证它是最终值，因为其他地方出现的另一个特定值可以覆盖它。对于复杂的场景，Kustosize 文件的继承链的检索通常不如 KCL 代码的继承链检索方便，需要仔细考虑指定的配置文件覆盖顺序。此外，Kustomize 无法解决 YAML 配置编写、约束验证、模型抽象和开发等问题，更适合于简单的配置场景。</p><p>在 KCL 中，配置合并操作可以对代码中的每个配置属性进行细粒度处理，合并策略可以灵活设置，而不限于整体资源，配置之间的依赖关系可以通过KCL的import语句进行静态分析。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-helm">vs. Helm<a class="hash-link" href="#vs-helm" title="Direct link to heading">​</a></h3><p>Helm 的概念源于操作系统的包管理机制。它是一个基于模板化 YAML 文件的包管理工具，支持包中资源的执行和管理。</p><p>KCL 自然提供了 Helm 功能的超集，因此您可以直接使用 KCL 作为替代。对于采用 Helm 的用户，KCL 中的堆栈编译结果可以打包并以 Helm 格式使用，通过 kpm 包管理工具进行分发复用。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-cdk">vs. CDK<a class="hash-link" href="#vs-cdk" title="Direct link to heading">​</a></h3><p>用CDK的高级语言编写可以很好地集成到应用程序项目中，这实际上是客户端运行时的一部分。对于KCL，由KCL编写的外部配置和策略与客户端运行时分离。</p><p>通用语言通常是过度的，也就是说，它远远超出了需要解决的问题。通用语言中存在各种安全问题，例如能力边界问题（启动本地线程、访问IO、网络、代码无限循环和其他安全风险）。例如，在音乐领域，有专门的音符来表达音乐，这便于学习和交流，它不能用一般语言表达清楚。</p><p>此外，由于通用语言风格多样，需要统一维护、管理和自动化。通用语言通常用于编写客户端运行时，它是服务器运行时的延续，不适合编写独立于运行时的配置，被编译成二进制文件，并最终从进程开始运行。此外，GPL 稳定性和可扩展性不易控制。然而，KCL 配置语言通常用于编写数据，将数据与简单逻辑相结合，它描述了预期的最终结果，然后由编译器或引擎使用，既具备丰富的编程抽象能力，又具备方便的数据处理方式。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vs-oparego">vs. OPA/Rego<a class="hash-link" href="#vs-oparego" title="Direct link to heading">​</a></h3><p>Rego 起源于逻辑编程，它基于 Datalog，是一种受限制的 Prolog 形式，而 KCL 基于静态类型结构，具备部分 OOP 特性。Rego 类型化特征结构的设计是为了解决 Prolog 在人类语言编码应用中的缺点，将 Datalog 变量用于编程本质上是约束验证任务，Datalog 是一种优秀的查询语言。但对于约束强制执行，它有点麻烦，因为实际上首先需要查询要应用约束的值才能进行校验。</p><p>此外，KCL 的方法更易于找到规范化、简化、面向人类易读，面向运行时性能优良的约束和校验表示，具备静态类型，并且它更适合于从 OpenAPI 生成或者创建 OpenAPI。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-step">Next step<a class="hash-link" href="#next-step" title="Direct link to heading">​</a></h2><ul><li><a href="/zh-CN/docs/user_docs/getting-started/install">Install KCL</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/KusionStack/kcl-lang.io/blob/main/versioned_docs/version-0.4.4/user_docs/getting-started/intro.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-12-19T09:11:25.000Z">2022/12/19</time></b> by <b>Peefy</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-CN/docs/user_docs/getting-started/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">快速开始</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh-CN/docs/user_docs/getting-started/install"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">安装</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kcl-是什么" class="table-of-contents__link toc-highlight">KCL 是什么?</a></li><li><a href="#配置是什么" class="table-of-contents__link toc-highlight">配置是什么?</a></li><li><a href="#为什么开发-kcl" class="table-of-contents__link toc-highlight">为什么开发 KCL?</a></li><li><a href="#为什么使用-kcl" class="table-of-contents__link toc-highlight">为什么使用 KCL?</a></li><li><a href="#kcl-使用场景" class="table-of-contents__link toc-highlight">KCL 使用场景</a></li><li><a href="#如何选择" class="table-of-contents__link toc-highlight">如何选择</a><ul><li><a href="#vs-yamljson" class="table-of-contents__link toc-highlight">vs. YAML/JSON</a></li><li><a href="#vs-jsonnetgcl" class="table-of-contents__link toc-highlight">vs. Jsonnet/GCL</a></li><li><a href="#vs-hcl" class="table-of-contents__link toc-highlight">vs. HCL</a></li><li><a href="#vs-cue" class="table-of-contents__link toc-highlight">vs. CUE</a></li><li><a href="#vs-kustomize" class="table-of-contents__link toc-highlight">vs. Kustomize</a></li><li><a href="#vs-helm" class="table-of-contents__link toc-highlight">vs. Helm</a></li><li><a href="#vs-cdk" class="table-of-contents__link toc-highlight">vs. CDK</a></li><li><a href="#vs-oparego" class="table-of-contents__link toc-highlight">vs. OPA/Rego</a></li></ul></li><li><a href="#next-step" class="table-of-contents__link toc-highlight">Next step</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/user_docs/getting-started/intro">简介</a></li></ul></div><div class="col footer__col"><div class="footer__title">资源</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/blog">博客</a></li><li class="footer__item"><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://join.slack.com/t/KusionStack/shared_invite/zt-19lqcc3a9-_kTNwagaT5qwBE~my5Lnxg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.antgroup.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/zh-CN/img/oss_logo.svg" alt="AntGroup Open Source Logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo" width="160" height="51"><img src="/zh-CN/img/oss_logo.svg" alt="AntGroup Open Source Logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo" width="160" height="51"></a></div><div class="footer__copyright">版权 © 2022 KCL Authors</div></div></div></footer></div>
<script src="/zh-CN/assets/js/runtime~main.264d3786.js"></script>
<script src="/zh-CN/assets/js/main.7ad8e011.js"></script>
</body>
</html>